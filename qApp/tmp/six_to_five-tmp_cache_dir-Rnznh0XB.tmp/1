import Ember from "ember";
import DS from "ember-data";
import Resolver from "ember/resolver";
import loadInitializers from "ember/load-initializers";
import config from "./config/environment";

Ember.MODEL_FACTORY_INJECTIONS = true;

var App = Ember.Application.extend({
  modulePrefix: config.modulePrefix,
  podModulePrefix: config.podModulePrefix,
  Resolver: Resolver
});

App.ApplicationAdapter = DS.RESTAdapter.extend({
  host: config.wordpress.host,
  ajax: function (url, method, hash) {
    hash.crossDomain = true;
    hash.xhrFields = { withCredentials: true };
    return this._super(url, method, hash);
  }
});

loadInitializers(App, config.modulePrefix);

export default App;